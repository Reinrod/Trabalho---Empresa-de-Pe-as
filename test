listaPeca = []
#---------Começo cadastrarPeca---------
def cadastrarPeca(codigo): # cadastra o nome, fabricante e valor da peça adicionada
  print('Você selecionou a Opção de Cadastrar Peça \nCódigo da Peça 00{}' .format(codigo))
  nome = input('Por favor entre com o NOME da peça: ')
  fabricante = input('Por favor entre com o FABRICANTE da peça: ')
  while True:
    try:
      valor_str = input('Por favor entre com o VALOR(R$) da peça: ')
      valor = float(valor_str.replace(',', '.')) # Replace comma with decimal point
      break # Exit loop if conversion is successful
    except ValueError:
      print('Entrada de valor inválida. Por favor, digite um número.')
  dicionarioPeca = {'codigo': codigo,
                    'nome': nome,
                    'fabricante': fabricante,
                    'valor': valor}

  listaPeca.append(dicionarioPeca.copy()) # adiciona valores do dicionarioPeca para a listaPeca
#---------Fim cadaastrarPeca-----------

#---------Começo consultarPeca---------
def consultarPeca(): # consulta a peça selecionada
  if not listaPeca: # Adiciona esta verificação
    print('Não há peças cadastradas.')
    return

  while True:
    try:
      print('-' * 20)
      print('Você selecionou a Opção de Consultar Peças')
      opConsultar = int(input('Escolha a opção desejada:\n'
                              '1-Consultar todas as Peças\n'
                              '2-Consultar Peças por Código\n'
                              '3-Consultar Peças por Fabricante\n'
                              '4-Retornar\n'
                              '>>'))

      if opConsultar == 1:
        for peca in listaPeca: # seleciona cada dicionário da minha lista de peças
          print('-' * 20)
          for key, value in peca.items(): # seleciona cada conjunto chave/valor do dicionário (ex: 'peça' : pedivela)
           print('{} : {}' . format(key, value))

      elif opConsultar == 2:
        cod = input('Digite o CÓDIGO da Peça: ')
        found = False
        for peca in listaPeca:
          if (str(peca['codigo']) == cod):
            for key, value in peca.items():
             print('{} : {}' . format(key, value))
            found = True
            break
        if not found:
          print('Peça com o código {} não encontrada.'.format(cod))

      elif opConsultar == 3:
        fab = input('Digite o FABRICANTE DA Peça: ')
        found = False
        for peca in listaPeca:
          if (peca['fabricante'] == fab):
            for key, value in peca.items():
             print('{} : {}' . format(key, value))
            found = True
        if not found:
          print('Nenhuma peça encontrada do fabricante {}.'.format(fab))

      elif opConsultar == 4:
        return # retorna ao Começo main

      else:
        print('Opção inválida. Por favor, digite um número entre 1 e 4.')
      continue

    except ValueError:
      print('Entrada inválida. Por favor, digite um número inteiro.')
#---------Fim consultarPeca------------

#---------Começo removerPeca---------
def removerPeca(): # remove a peça selecionada
  print('Você selecionou a Opção de REMOVER Peça')
  try:
    rem = int(input('Digite o codigo da peça a ser removida: '))
    removed = False
    for peca in listaPeca:
      if (peca['codigo'] == rem):
       listaPeca.remove(peca)
       print('Peça com código {} removida com sucesso.'.format(rem))
       removed = True
       break
    if not removed:
      print('Peça com o código {} não encontrada.'.format(rem))
  except ValueError:
    print('Entrada inválida. Por favor, digite um número inteiro para o código da peça.')
#---------Fim removerPeca------------

#---------Começo main---------
print('Bem vindo ao DonePeças!\n'
        'O que você procura?')
registroMecanico = 0
while True:
  try:
    opcao = int(input('Escolha a opção desejada:\n1-Cadastrar Peças \n2-Consulta Peças \n3-Remover Peças \n4-Sair \n>>'))

    if opcao == 1:
     registroMecanico = registroMecanico + 1
     cadastrarPeca(registroMecanico)
    elif opcao == 2:
     consultarPeca()
    elif opcao == 3:
     removerPeca()
    elif opcao == 4:
     print('Programa finalizado')
     break
    else:
     print('Opção inválida. Por favor, digite um número entre 1 e 4.')
     continue

  except ValueError:
   print('Entrada inválida. Por favor, digite um número inteiro.')
#---------Fim main------------
